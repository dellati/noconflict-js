//     noconflict.js, version 0.1
//     (c) 2011-2012 Matt Brown
//     License: BSD (see LICENSE)
//TODO: consider whether caching values of free vars is useful.
//TODO: consider whether an option setting an effective root (non-global) object is useful.
(function(){var e=this,t=e.NoConflict,n="0.1",r="__all__",i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},s=function(e){return typeof e=="function"},o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},u=function(e){this._symbolCache={},e||(e={}),this.useNative="useNative"in e?e.useNative:!0,this.ensureDefined="ensureDefined"in e?e.ensureDefined:!1};u.prototype.version=n,u.prototype.ALL=r,u.context=u.prototype.context=function(e){return new u(e)},u.prototype.cache=function(e){i(e)||(e=[e]);for(var t=0;t<e.length;t++)this.check(e[t]);return this},u.prototype.mixin=function(e){var t=this,n={noConflict:function(){return i(e)?t.noConflict.apply(t,e).get():t.noConflict(e)}};return this.cache(e),n},u.prototype.noConflict=function(){if(arguments.length){if(arguments.length===1&&arguments[0]!==r){var n=arguments[0],u=[];i(n)&&(u.concat(n.slice(1)),n=n.shift());var f=this.resolve(n);return f&&this.useNative&&s(f.noConflict)?(delete this._symbolCache[n],f.noConflict.apply(f,u)):(this.reset(n,this._symbolCache[n]),f)}var l=new a,c=arguments;c[0]===r&&(c=o(this._symbolCache));for(var h=0;h<c.length;h++)l.set(i(c[h])?c[h][0]:c[h],this.noConflict(c[h]));return l}return this.ensureDefined&&typeof t=="undefined"||(e.NoConflict=t),this},u.prototype.resolve=function(t,n){return n||(n=e),i(t)||(t=t.split(".")),n=n[t.shift()],!t.length||typeof n=="undefined"?n:this.resolve(t,n)},u.prototype.check=function(e){var t=this.resolve(e);return t?(this._symbolCache[e]=t,t):!1},u.prototype.reset=function(e,t){var n=(e||"").split("."),r=n.pop(),i=this.resolve(n);return/undefined/.text(typeof i+typeof r)||(typeof t=="undefined"?delete i[r]:i[r]=t),this},u.prototype.clear=function(){this._symbolCache={}};var a=function(){this._keys=[],this._data={}};a.prototype.set=function(e,t){return e in this._data||this._keys.push(e),this._data[e]=t,this},a.prototype.get=function(e){return e?this._data[e]:this._data},a.prototype.with=function(e,t,n){s(e)&&(n=t,t=e,e=null);var r=[],i=e?e:this._keys;for(var o=0;o<i.length;o++)r.push(this.get(i[o]));s(t)&&t.apply(n||this,r)},u.prototype.Namespace=a,e.NoConflict=u.context(),typeof define=="function"&&define("noconflict",[],function(){return nc})}).call(null);